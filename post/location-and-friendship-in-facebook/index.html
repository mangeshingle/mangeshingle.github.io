
<!DOCTYPE html>
<html lang="en-us">

<!-- Mirrored from www.albertauyeung.com/post/location-and-friendship-in-facebook/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 02 Nov 2018 14:48:01 GMT -->
<head>

  
  <meta charset="UTF-8">
  <title>
    Location and Friendship: Data Mining in Facebook | Albert Au Yeung
  </title>


  
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1">

  
  <link rel="canonical" href="index.html"/>

  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans">
  <link rel="stylesheet" href="../../css/sanitize.css">
  <link rel="stylesheet" href="../../css/responsive.css">
  <link rel="stylesheet" href="../../css/highlight.css">
  <link rel="stylesheet" href="../../css/theme.css">
  <link rel="stylesheet" href="../../css/custom.css">
  
  
  <link href="../../index.xml" rel="alternate" type="application/rss+xml" title="Albert Au Yeung" />
  <link href="../../index.xml" rel="feed" type="application/rss+xml" title="Albert Au Yeung" />

  
  


</head>



<body>
<div class="container">

  
  <header role="banner">
    <div class="row gutters">
      <div id="site-title" class="col span_6">
        <h1><a href="../../index.html">Albert Au Yeung</a></h1>
        <h2>Notes on machine learning and A.I.</h2>
      </div>
      <div id="social" class="col span_6">
        <ul>
          <li><a href="../../about/index.html">About</a></li>
          <li><a href="../index.html">Archive</a></li>
          <li><a href="https://github.com/albertauyeung" target="_blank">Github</a></li>
          <li><a href="https://www.linkedin.com/in/albert-au-yeung/" target="_blank">LinkedIn</a></li>
        </ul>
      </div>
    </div>
  </header>


  
  <main id="single" role="main">
    <div class="article-header">
      <h1>Location and Friendship: Data Mining in Facebook</h1>
      <div class="meta">
        
        Sep 5, 2010 &nbsp;
        
        
      </div>
    </div>
    <article>
      

<p>In the past, studying social issues such as the mobility of a group of people generally required a huge amount of effort. <a href="https://en.wikipedia.org/wiki/Questionnaire">Questionnaires</a> would have had to be prepared, distributed, and collected after they were filled in. It was and still is a labor-intensive task when face-to-face interviews are required to obtain various personal data.</p>

<p>Nowadays, we have more and more people connected to the Internet, and many of these Internet users participate in various kinds of social interactions on the Web. Most notably, users enjoy social networking sites such as <a href="https://www.facebook.com/">Facebook</a> to establish their personal profile online and to keep track of what their friends are doing. As a result, huge volumes of data of social interactions can be collected much more easily nowadays. Analyzing this data can give insight into how different factors such as location, distance and friendship influence the way people interact with each other.</p>

<p>The current largest online social networking site is Facebook. It claims to have a community of <a href="http://blog.facebook.com/blog.php?post=409753352130">more than 500 million registered users</a>, and it is <a href="http://www.alexa.com/siteinfo/facebook.com">ranked second</a> in terms of Internet traffic. To serve this large number of users and to keep track of all the user activities, Facebook is said to have been running <a href="http://www.datacenterknowledge.com/archives/2010/06/28/facebook-server-count-60000-or-more/">more than 60,000 servers</a>.</p>

<p>Facebook may just be a place where friends catch up with each other. However, it has grown to become a world-wide network of frequent and dynamic interactions. It is a place where social theories can be tested due to the diversity of the backgrounds of the users. The social data collected by Facebook is valuable both in generating more personalized services and in understanding more about the users themselves (see for example Facebook&rsquo;s project on <a href="http://apps.facebook.com/usa_gnh/">gross national happiness</a>.</p>

<p>Recently, Facebook published a paper in the <a href="http://www.www2010.org/">19th International World Wide Web Conference</a> with the title <a href="http://cameronmarlow.com/papers/find-me-if-you-can">Find Me If You Can: Improving Geographical Prediction with Social and Spatial Proximity</a> (Backstrom et al., 2010). The paper offers interesting insights into the relationship between geographical distance and friendship of users. Let&rsquo;s take a look at its content in this blog post.</p>

<h2 id="location-population-and-friendship">Location, Population and Friendship</h2>

<p>As the title of the paper suggests, it is about predicting a user&rsquo;s location based on information about them available in Facebook. The application of such a technique is quite broad. It can be used to detect abnormal usage, to improve user experience, or to optimize the presentation of advertisements. In addition, the study also gives insight into the relationship between social ties and geographic distance: do users have more friends who are located close to them and fewer friends who are living further away? Or is it true that the Internet has removed the limitations of physical distance?</p>

<h3 id="facebook-data">Facebook Data</h3>

<p>The authors report that 6% of the 100 million Facebook users in the US have put their home addresses in their profiles. Out of these addresses, 60% can be converted into geo-locations (latitude and longitude). As a result, the study makes use of a dataset that contains about 3.5 million user profiles with precisely known home addresses.</p>

<p>Among these 3.5 million users, 2.9 million of them have at least one friend with a valid address. On average, these users have about 10 friends with valid addresses. If we consider the social network of these users, there are about 30.6 million relations between users with precisely known locations (representing the social network as a graph  would result in a graph with 2.9 million vertices/nodes and 30.6 million edges). It is a huge data set and, as the authors have noted, it  features much more precise location information compared to previous studies which usually only deduce location information from IP addresses.</p>

<h3 id="population-density">Population Density</h3>

<p>One interesting thing revealed in the paper is the distribution of population across the country. The authors divide the population of the US into three groups of roughly the same size according to the population density of their locations, and then plot the average number of people living x miles away against the distance from these locations. The graph shows nicely the changes in population distribution as one  moves away from a certain location. For densely populated areas, for  instance, the number of people increases with the distance in the beginning as one considers a larger area within a large city, but it decreases as soon as one moves to the suburban areas outside the city. The lines of the three groups join each other at a point when the distance is far enough that the average population density of the country is reflected.</p>

<p><center>
<img src="../../images/Fb-population-density.png" width="70%"/><br/>
<div style="width:60%; font-size: 13px; line-height: 1.3em;">Relationship between population and distance for areas with different population densities. The three lines join each other at a point where the average population density is reflected (source: Backstrom, Sun, Marlow).</div>
</center></p>

<p>Of course, this result seems to be quite obvious and intuitive. However, still it is interesting that data from a social networking site can be used to show such a characteristic of population density.</p>

<h3 id="friendship-and-distance">Friendship and Distance</h3>

<p>The second aspect the paper investigates is the probability of friendship as a function of geographical distance. Firstly, the distance between each pair of friends is calculated. Secondly, the probability of friendship at a certain distance is obtained by calculating the ratio  between the number of pairs of friends and the total number of pairs of  users at that distance. The authors observed that probability of  friendship is inversely proportional to distance at medium to long-range  distances. In other words, you are less likely to have friends which live further away. However, at <strong>shorter</strong> distances friendship is less sensitive to the effect of distance. Imagine an apartment building  with multiple families &#8212; just living there wouldn&#8217;t necessarily imply being friends with everyone.</p>

<p><center>
<img src="../../images/Fb-friendship-probability.png" width="70%"/><br/>
<div style="width:60%; font-size: 13px; line-height: 1.3em;">Probability distribution of friendship over distance. It shows that probability of friendship is inversely proportional to distance in the medium and long range distances (source: Backstrom, Sun, Marlow).</div>
</center></p>

<p>What is more interesting is that when the authors break down the users into different groups according to the population density of the areas in which they live, they find out that the probability distribution of friendship is different for different groups of users. For users living in low density areas, they are more likely to have friends within a short distance: seems like people in rural areas &lsquo;stick together&rsquo;. On the other hand, users living in high density areas are slightly more likely to have friends living far away. The authors suggest that this may be because that &lsquo;<em>people living in metropolitan areas are more cosmopolitan</em>&rsquo;.</p>

<p><center>
<img src="../../images/Fb-friendship-probability-2.png" width="70%"/><br/>
<div style="width:60%; font-size: 13px; line-height: 1.3em;">Probability of friendship for users in areas of different population densities. People living in high density areas are more likely to have long-distance friends (source: Backstrom, Sun, Marlow).</div>
</center></p>

<h3 id="location-prediction">Location Prediction</h3>

<p>The second part of the paper focuses on the problem of predicting the location of a user. Here, the question is: can we predict the location of a user if we know the locations of some or all of his friends? One could simply assume that a user would most likely be located close to his friends, and thus predict the user&rsquo;s location using, for example, the mean or median of his friends&rsquo; locations. However, since geographically there are places where no people live, such simple  approaches may produce strange and funny results when a user has friends from different places in the US. Imagine having two friends, one in Hawaii and one in Los Angeles - now calculate the mean of these two locations and you might end up in the middle of the Pacific Ocean.</p>

<p><center>
<img src="../../images/Hawaii-los-angeles.png" width="70%"/><br/>
<div style="width:60%; font-size: 13px; line-height: 1.3em;">Sometimes &lsquo;<em>keeping it simple, stupid</em>&rsquo; will not work that well.</div>
</center></p>

<p>In fact, given the probability distribution mentioned above, one can also consider a maximum likelihood estimator of the location of a user. For example, we can calculate the probability that a user&#8217;s location is  at point <em>u</em> by multiplying the probability of friendship given the distance between location <em>u</em> and the location of the user&rsquo;s friends. However, for a large social network and a huge geographical area, such an approach would be very computationally expensive.</p>

<p>The solution to this problem suggested by the author is to assume that a user would always co-locate with one of his/her friends. In this way the number of points that have to be evaluated becomes much smaller (i.e. the search space becomes much smaller). The paper presents some experiments and shows that this method of predicting the location of a user (while still being only a rough estimation) is more accurate than the current <em>standard</em> of using the IP addresses of the users for deducing location information.</p>

<h2 id="summary">Summary</h2>

<p>The paper of Backstrom, Sun and Marlow describes the analysis of Facebook data and the technique of location prediction in more detail. I think this paper is interesting because it shows how the large volume of user data collected from online social networking sites can be used to study different kinds of social issues. With this kind of research, we can expect computer science to play a more important role in the study of social issues and in the validation of different social theories.</p>

<p>The paper shows that people are still rather bounded by physical distance. It is still more likely that people have friends who are physically located close to themselves, even though the Internet has provided different channels for users to make friends with someone living far away.</p></p>

<p>In fact, some other studies have also arrived in similar conclusions. For example, <a href="http://sonic.northwestern.edu/">a group of researchers</a> from <a href="http://www.northwestern.edu/">Northwestern University</a> have studied user logs from a popular <a href="http://en.wikipedia.org/wiki/Massively_multiplayer_online_game">massive multi-player online game</a> (MMOG) EverQuest II (Huang et al. 2009). The researchers found that although players can meet other players from all over the world in the game, and that homophily (similarity in certain characteristics) has certain influence on user behaviour, players are still more likely to interact with others who are geographically close to themselves, especially when the interaction involves partnership and collaboration in the game.</p>

<p><a href="http://en.wikipedia.org/wiki/Frances_Cairncross">Frances Cairncross</a> first wrote about the <a href="http://www.amazon.com/Death-Distance-Communications-Revolution-Change/dp/0875848060">&lsquo;death of distance&rsquo;</a> more than a decade ago. However, even now when people can connect to the Internet wherever they want, geographical proximity still seems to play an important role in determining with whom people interact with. Is this a barrier that even the Internet and the World Wide Web are not able to remove? Or is that there is still relatively little benefits for people to interact with someone far away? These would be interesting questions for both computer scientists and social scientists in the future.</p>

<h2 id="references">References</h2>

<ul>
<li><a href="http://www.facebook.com/data">Facebook Data Team</a></li>
<li><a href="http://cameronmarlow.com/papers/find-me-if-you-can">Find Me If You Can: Improving Geographical Prediction with Social and Spatial Proximity</a>, L. Backstrom, E. Sun and C. Marlow, WWW 2010.</li>
<li><a href="http://dmitriwilliams.com/proximity.pdf">Virtually There: The Role of Proximity and Homophily in Virtual World Networks</a>, Y. Huang, C. Shen, D. Williams, N. Contractor, SIN-09.</li>
<li><a href="http://www.amazon.com/Death-Distance-Communications-Revolution-Change/dp/0875848060">The Death of Distance: How the Communications Revolution Will Change Our Lives</a>, F. Cairncross, 1997</li>
</ul>

      
      
      
    </article>
    
    
 <aside><div id="disqus_thread"></div></aside>

<script type="text/javascript">
     
    var disqus_shortname = 'albertauyeung';

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



    
  </main>
  
  <nav class="pagination-single">
    <center>
      <a href="#">Back to Top</a>
    </center>
    
  </nav>


  
  <footer role="contentinfo">
    <div style="text-align:center; font-size: 0.8em">
      Copyright © 2017 Albert Au Yeung. All Rights Reserved.
    </div>
  </footer>


</div>

<script src="../../js/jquery-3.2.1.min.js"></script>
<script src="../../js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>
<script src="../../../cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJaxdda6.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script>
$(document).ready(function() {
  var links = document.querySelectorAll('article a');
    for (var i = 0, length = links.length; i < length; i++) {
      if (links[i].hostname != window.location.hostname) {
        links[i].target = '_blank';
      }
  }
});
</script>

<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-30554548-1', 'auto');
	ga('send', 'pageview');
</script>

</body>

<!-- Mirrored from www.albertauyeung.com/post/location-and-friendship-in-facebook/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 02 Nov 2018 14:48:08 GMT -->
</html>

